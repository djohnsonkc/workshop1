<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/images/favicon.ico">
    
    <title>Developer Workshop 1 - Register</title>

    <!-- Bootstrap Core CSS -->
    <link href="/themes/startbootstrap-bare-1.0.1/css/bootstrap.min.css" rel="stylesheet">

    <!-- this is where we override bootstrap.min.css and cover.css as needed -->
    <link href="/themes/startbootstrap-bare-1.0.1/css/custom.css" rel="stylesheet">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><i class="glyphicon glyphicon-flash"></i> Developer Workshop1</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/register">Register</a>
                    </li>
                    <li>
                        <a href="/login">Login</a>
                    </li>
                    <li>
                        <a href="/api-demo">API</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>


    <!-- Page Content -->
    <div class="container">

        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">


					<h2>Account Registration</h2>
					<p>Use the form below to create a new account through our API. <u>Test server-side validation</u> by omitting required fields or by attempting to register using an existing user name or email address.</p>

                    
                    <p>*Required fields</p>

					<form class="form-horizontal" action="" method="POST">
					  <fieldset>
					  	<!--
					    <div id="legend">
					      <legend class="">Register</legend>
					    </div>
						-->
					    <div class="control-group">
					      <!-- Username -->
					      <label class="control-label" for="first_name">*First Name</label>
					      <div class="controls">
					        <input type="text" id="first_name" name="first_name" placeholder="" class="input-xlarge" value='John'>
					        <p class="help-block">First name can contain any letters or numbers, without spaces</p>
					      </div>
					    </div>
					 
					 	<div class="control-group">
					      <!-- Username -->
					      <label class="control-label" for="last_name">*Last Name</label>
					      <div class="controls">
					        <input type="text" id="last_name" name="last_name" placeholder="" class="input-xlarge" value='Smith'>
					        <p class="help-block">Last name can contain any letters or numbers, without spaces</p>
					      </div>
					    </div>

						<div class="control-group">
					      <!-- Username -->
					      <label class="control-label" for="user_name">*User Name</label>
					      <div class="controls">
					        <input type="text" id="user_name" name="user_name" placeholder="" class="input-xlarge" value='jsmith12'>
					        <p class="help-block">Username can contain any letters or numbers, without spaces</p>
					      </div>
					    </div>

					    <div class="control-group">
					      <!-- E-mail -->
					      <label class="control-label" for="email">*E-mail Address</label>
					      <div class="controls">
					        <input type="text" id="email" name="email" placeholder="" class="input-xlarge" value='jsmith12@gmail.com'>
					        <p class="help-block">Please provide your E-mail</p>
					      </div>
					    </div>
					 
					    <div class="control-group">
					      <!-- Password-->
					      <label class="control-label" for="password">*Password</label>
					      <div class="controls">
					        <input type="password" id="password" name="password" placeholder="" class="input-xlarge" value='1234'>
					        <p class="help-block">Password should be at least 4 characters</p>
					      </div>
					    </div>
					 
					 
					    <div class="control-group">
					      <br>
					      <!-- Button -->
					      <div class="controls">
					        <button id='post-link' class="btn btn-success">Register</button>
                            <br>
                            <br>
                            <p>Already have an account? <a href="/login" class="skin-text" target="_self">Login now</a></p>
					      </div>
					    </div>
					  </fieldset>
					</form>

									    




		    </div>        

            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">

					<div class="title js-scroll-top">
						<h2>See the API response below</h2>
                        <p><strong>PLEASE NOTE:</strong> this API method is returning mongoose-specific validation errors. We can package these differently in our API method.</p>
					</div>

		            <pre id="json-result">
		            	
		            </pre>


			</div>


		</div>

	</div>


</body>

<!-- jQuery Version 1.11.1 -->
<script src="/scripts/libs/jquery-2.1.1.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/scripts/libs/bootstrap.min.js"></script>

<script type="text/javascript">


$("#post-link").click(function (e) {
    e.preventDefault();
    postRequest();
});



function postRequest() {

    var data = JSON.stringify(

            {
                "first_name": $("#first_name").val(),
                "last_name": $("#last_name").val(),
                "email": $("#email").val(),
                "user_name": $("#user_name").val(),
                "password": $("#password").val()

            }

    );


    var request = $.ajax({
        url: '/api/v1/accounts/register/',
        type: "POST",
        data: data,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            //alert("SUCCESS: " + JSON.stringify(data));
            $("#json-result").html(syntaxHighlight(JSON.stringify(data, undefined, 4)));
            
            //$("#msg").html("Use the id property to test the GET, PUT and DELETE methods");
            
            $("#id").val(data.account_id);

            $('html, body').animate({
                    scrollTop: $(".js-scroll-top").offset().top
                }, 1000);

        },
        error: function (xhr, ajaxOptions, thrownError) {
        	
            //console.log("ERROR: " + JSON.stringify(xhr));
            //alert("ERROR: " + xhr.status);
            //$("#json-result").html(syntaxHighlight(JSON.stringify(xhr, undefined, 4)));
            //instead of showing the HTTP status, show the API's actual response that rides inside of the xhr.responseText
			$("#json-result").html(syntaxHighlight(JSON.parse(xhr.responseText)));

            $('html, body').animate({
                    scrollTop: $(".js-scroll-top").offset().top
                }, 1000);

        }
    });



}



function syntaxHighlight(json) {
    if (typeof json != 'string') {
        json = JSON.stringify(json, undefined, 2);
    }
    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
        var cls = 'number';
        if (/^"/.test(match)) {
            if (/:$/.test(match)) {
                cls = 'key';
            } else {
                cls = 'string';
            }
        } else if (/true|false/.test(match)) {
            cls = 'boolean';
        } else if (/null/.test(match)) {
            cls = 'null';
        }
        return '<span class="' + cls + '">' + match + '</span>';
    });
}


</script>


</html>
